{% include 'includes/messages.html' %}
{% load static %}

<link rel="stylesheet" href="{% static 'css/base.css' %}">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Toit et Moi - {% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    
    </style>
    {% block extra_css %}{% endblock %}
</head>
<script>
  // Auto-hide alerts after 5 seconds
  setTimeout(() => {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
      alert.style.opacity = '0';
      setTimeout(() => alert.remove(), 500); // remove after fade-out
    });
  }, 5000);
</script>

<body>
  <body>
    <nav class="navbar">
        <div class="logo">
          <a href="{% url 'SayHello' %}">
            <img src="\media\photos\25\04\25\logo.png" alt="Toit et Moi">
          </a>        
        </div>
        <button class="menu-toggle" id="menu-toggle" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
        </button>

        <ul class="nav-links" id="nav-links">
            <li><a href="{% url 'SayHello' %}">Home</a></li>
            <li><a href="{% url 'Products' %}">Immo</a></li>
            <li><a href="{% url 'Settings' %}">About</a></li>
            <li><a href="{% url 'Services' %}">Services</a></li>
            <li><a href="{% url 'Contact' %}">Contact</a></li>
            {% if user.is_authenticated %}
            <li class="relative">
              <a href="javascript:void(0)" id="profile-menu-toggle">
                <img src="{{ request.user.profile_picture.url }}"  alt="Profile Picture" class="w-12 h-12 rounded-full border-2 border-primary-light">
              </a>
          </li>
            <ul id="profile-menu">
            <li><a href="{% url 'profile' %}" class="block px-4 py-2 text-dark-color hover:bg-light-gray">Profile</a></li>
            <li><a href="{% url 'modify_profile' %}" class="block px-4 py-2 text-dark-color hover:bg-light-gray">Modify Profile</a></li>
            <li><a href="{% url 'AddProduct' %}" class="block px-4 py-2 text-dark-color hover:bg-light-gray">Add Product</a></li>
            {% if user.status != 'admin' %}
            <li><a href="{% url 'my_favoris' %}" class="block px-4 py-2 text-dark-color hover:bg-light-gray">Mes favoris</a></li> 
            {% endif %}
            <li>
  <a href="{% url 'inbox' %}">
    Messages
    {% if unread_message_count > 0 %}
      <span class="badge">{{ unread_message_count }}</span>
    {% endif %}
  </a>
</li>
    
            {% if user == x.user.user or user.status == 'admin' or user.status == 'entrepreneur' %}
            <li><a href="{% url 'dashboard_entrepreneur' %}" class="block px-4 py-2 text-dark-color hover:bg-light-gray">
             Gérer les réservations</a></li>
            {% endif %}
            {% if user.status == 'admin' %}
                <li><a href="{% url 'Dashboard' %}" class="block px-4 py-2 text-dark-color hover:bg-light-gray">Dashboard</a></li>
            {% endif %}
            <li><a href="{% url 'logout' %}" class="block px-4 py-2 text-dark-color hover:bg-light-gray">Logout</a></li>
           </ul>
            {% else %}
            <li><a href="{% url 'Loginpage' %}">Login</a></li>
            <li><a href="{% url 'Register' %}">Register</a></li>
            {% endif %}
        </ul>
    </nav>

    <main>
        {% block content %}{% endblock content %}
    </main>

    <footer>
        <div class="footer-container">
          <footer>
            <div class="footer-container">
                <section class="footer-section">
                    <h4>About Us</h4>
                    <p>Chez Toit et Moi, nous repensons la gestion immobilière pour la rendre plus simple, plus humaine et plus efficace. Notre plateforme est née de la volonté de moderniser le secteur immobilier en proposant des services digitaux innovants, pensés aussi bien pour les propriétaires que pour les locataires.</p>
                </section>
    
                <section class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="{% url 'SayHello' %}"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="{% url 'Settings' %}"><i class="fas fa-chevron-right"></i> About</a></li>
                        <li><a href="{% url 'Services' %}"><i class="fas fa-chevron-right"></i> Services</a></li>
                        <li><a href="{% url 'Contact' %}"><i class="fas fa-chevron-right"></i> Contact</a></li>
                    </ul>
                </section>
    
                <section class="footer-section">
                    <h4>Contact Us</h4>
                    <p><i class="fas fa-envelope"></i> <a href="mailto:Abdellahdofus@gmail.com">Abdellahdofus@gmail.com</a></p>
                    <p><i class="fas fa-phone"></i> +212 555-555-555</p>
                    <p><i class="fas fa-map-marker-alt"></i> University District, City</p>
                </section>
    
                <section class="footer-section">
                    <h4>Follow Us</h4>
                    <div class="social-media">
                        <a href="https://facebook.com" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://twitter.com" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://instagram.com" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="https://linkedin.com" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </section>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 UniColoc. All Rights Reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
            </div>
        </footer>
        </div>
        
    </footer>

    {% block extra_js %}{% endblock %}

    <script>
        const menuToggle = document.getElementById('menu-toggle');
        const navLinks = document.getElementById('nav-links');

        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            menuToggle.innerHTML = navLinks.classList.contains('active')
                ? '<i class="fas fa-times"></i>'
                : '<i class="fas fa-bars"></i>';
        });

        const navbar = document.querySelector('.navbar');
        window.addEventListener('scroll', () => {
            navbar.classList.toggle('scrolled', window.scrollY > 50);
        });
        document.addEventListener('DOMContentLoaded', function () {
            const profileMenuToggle = document.getElementById('profile-menu-toggle');
            const profileMenu = document.getElementById('profile-menu');

            profileMenuToggle?.addEventListener('click', function (e) {
                e.preventDefault();
                profileMenu.style.display = profileMenu.style.display === 'block' ? 'none' : 'block';
            });

            document.addEventListener('click', function (e) {
                if (!profileMenu?.contains(e.target) && !profileMenuToggle?.contains(e.target)) {
                    profileMenu.style.display = 'none';
                }
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>

</head>
